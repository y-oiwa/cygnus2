<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cygnus 2</title>
    <!-- <link rel="stylesheet" href="https://unpkg.com/destyle.css@2.0.2/destyle.css" /> -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <!-- main view -->
    <div class="view" id="main-view">
        <header>
            <h1 class="logo">Cygnus 2</h1>
            <div id="manu-btn">menu</div>
        </header>
        <main>
            <div id="send-btn">send</div>
        </main>
    </div>

    <!-- form view -->
    <div class="view" id="form-view">
        <h1 class="logo">Cygnus 2</h1>
        <ul>
            <li>
                <label for="name">氏名</label>
                <input type="text" name="name" id="name" required>
            </li>
            <li>
                <label for="homeroom">クラス</label>
                <select name="homeroom" id="homeroom">
                    <option value="３１Ｈ（小玉ホーム）">1</option>
                    <option value="３２Ｈ（杉本ホーム）">2</option>
                    <option value="３３Ｈ（橘ホーム）">3</option>
                    <option value="３４Ｈ（道上ホーム）">4</option>
                    <option value="３５Ｈ（来間ホーム）">5</option>
                    <option value="３６Ｈ（土田ホーム）">6</option>
                    <option value="３７Ｈ（吉田ホーム）">7</option>
                    <option value="３８Ｈ（中村和ホーム）">8</option>
                    <option value="３９Ｈ（宮前ホーム）">9</option>
                    <option value="３０Ｈ（亀倉ホーム）">10</option>
                </select>
            </li>
            <li>
                <label for="studentId">出席番号(2桁)</label>
                <select name="studentId" id="studentId">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                    <option value="32">32</option>
                    <option value="33">33</option>
                    <option value="34">34</option>
                    <option value="35">35</option>
                    <option value="36">36</option>
                    <option value="37">37</option>
                    <option value="38">38</option>
                    <option value="39">39</option>
                    <option value="40">40</option>
                    <option value="41">41</option>
                    <option value="42">42</option>
                    <option value="43">43</option>
                    <option value="44">44</option>
                    <option value="45">45</option>
                </select>
            </li>
            <div id="save-btn">Save</div>
        </ul>
    </div>

    <!-- menu view -->
    <div class="view" id="memu-view">
        <ul>
            <li>Open in Google Forms</li>
            <li>Remove your data</li>
        </ul>
    </div>

    <script>
        function changeView(v) {
            let views = document.getElementsByClassName("view");
            for (let view of views) {
                view.style.display = "none";
            }
            document.getElementById(v).style.display = "block";
        }

        function init() {
            if(!localStorage.getItem("data")){
                changeView("form-view");
            } else{
                changeView("main-view");
            }
        }

        let inputs = {
            name: undefined,
            homeroom: undefined,
            studentId: undefined
        }
        
        function getInputs() {
            let name = document.getElementById("name").value;
            if (name) {
                inputs.name = name;
                inputs.homeroom = document.getElementById("homeroom").value;
                inputs.studentId = document.getElementById("studentId").value;
            } else {
                window.alert("Invalid Input");
            }
        }

        const date = new Date;
        
        function getUrl(mode){
            let url = `https://docs.google.com/forms/d/e/1FAIpQLSepa-OLudQ0gRFH8LM2Uroj1Eq-hlkEDLms8lml2w5UW7l5Iw/${mode}?entry.2001787292_year=${date.getFullYear()}&entry.2001787292_month=${date.getMonth()+1}&entry.2001787292_day=${date.getDate()}&entry.1893219725=${inputs.homeroom}&entry.1301531773=${inputs.studentId}&entry.2096025471=${inputs.name}&entry.2071193908=%E7%86%B1%E3%81%AF%E3%81%82%E3%82%8A%E3%81%BE%E3%81%9B%E3%82%93&entry.1616853833=%E9%A2%A8%E9%82%AA%E7%97%87%E7%8A%B6%E3%81%AF%E3%81%82%E3%82%8A%E3%81%BE%E3%81%9B%E3%82%93`;
            localStorage.url = url;
        }

        window.onload = init();
        document.getElementById("save-btn").addEventListener("click", getInputs)
    </script>
</body>

</html>